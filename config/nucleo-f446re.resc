# Filename: stm32f4.resc

$CONFIG_FILE?=@/home/ferrierf/Projects/stm32-from-scratch/config/nucleo-f446re.repl
$FIRMWARE_FILE?=@/home/ferrierf/Projects/stm32-from-scratch/bin/firmware_Debug.elf

mach create
machine LoadPlatformDescription $CONFIG_FILE

macro reset
"""
    sysbus LoadELF $FIRMWARE_FILE
"""

runMacro $reset